using UnityEngine;
using UnityEngine.SceneManagement; // Необходимо для управления сценами

public class CounterAndRandSpawn : MonoBehaviour
{
    // static означает, что эта переменная будет ОДНА НА ВСЕХ врагов.
    // Это наш общий счетчик.
    private static int enemiesRemaining = 0;

    // Этот метод вызывается один раз, когда объект появляется на сцене.
    void Awake()
    {
        // Каждый новый враг прибавляет себя к общему счетчику.
        enemiesRemaining++;
        // Строка для отладки, можно будет увидеть в консоли Unity.
        Debug.Log("Враг появился. Всего врагов на сцене: " + enemiesRemaining);
    }

    // Этот метод вызывается, когда объект с этим скриптом уничтожается.
    // Это идеальное место для отслеживания "смерти" врага.
    void OnDestroy()
    {
        // Уменьшаем счетчик, так как этого врага больше нет.
        enemiesRemaining--;
        Debug.Log("Враг уничтожен. Осталось врагов: " + enemiesRemaining);

        // Проверяем, не осталось ли врагов на сцене.
        // <= 0 на случай, если что-то пойдет не так и счетчик станет отрицательным.
        if (enemiesRemaining <= 0)
        {
            Debug.Log("Все враги уничтожены! Загрузка сцены 'Ending'...");
            // Загружаем сцену с названием "Ending". Убедитесь, что у вас есть такая сцена.
            SceneManager.LoadScene("Ending");
        }
    }
}